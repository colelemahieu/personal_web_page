<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cole Le Mahieu</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>

  <div class="site-title">Cole Le Mahieu</div>

  <nav>
    <a onclick="showSection('home')">Home</a>
    <a onclick="showSection('projects')">Projects</a>
    <a onclick="showSection('cv')">CV</a>
  </nav>

  <section id="home" class="content active"></section>
  <section id="projects" class="content"></section>
  <section id="cv" class="content"></section>

  <script>
    function showSection(id) {
      const sections = document.querySelectorAll('.content');
      sections.forEach(sec => sec.classList.remove('active'));
      const target = document.getElementById(id);
      target.classList.add('active');
      loadSection(id);
    }

    function loadSection(id) {
      const htmlPath = `menu/${id}.html`;
      const jsPath = `menu/${id}.js`;

      fetch(htmlPath)
        .then(res => res.text())
        .then(html => {
          document.getElementById(id).innerHTML = html;

          const script = document.createElement('script');
          script.src = jsPath;
          script.onload = () => {
            const setupFn = window[`setup${capitalize(id)}`];
            if (typeof setupFn === 'function') {
              setupFn();
            }
          };
          document.body.appendChild(script);
        })
        .catch(err => console.error(`Error loading ${id}:`, err));
    }

    function capitalize(str) {
      return str.charAt(0).toUpperCase() + str.slice(1);
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadSection('home');     
      loadSection('projects'); 
    });
  </script>

</body>
</html>
